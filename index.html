<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="assets/piano.ico" rel="shortcut icon">

  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@300&family=Open+Sans:wght@300;400;800&display=swap"
    rel="stylesheet">
  <link href="style.css" rel="stylesheet">

  <title>virtual-piano</title>
</head>

<body>
  <header class="header">
    <h1 class="header-title">Virtual Piano</h1>
  </header>
  <main class="main">
    <div class="btn-container">
      <button class="btn btn-notes btn-active">Notes</button>
      <button class="btn btn-letters">Letters</button>
    </div>
    <div class="piano" id="piano">
      <div class="piano-key .piano-key-active" data-letter="D" data-note="c" data-key="1"></div>
      <div class="piano-key .piano-key-active" data-letter="F" data-note="d" data-key="2"></div>
      <div class="piano-key .piano-key-active" data-letter="G" data-note="e" data-key="3"></div>
      <div class="piano-key .piano-key-active" data-letter="H" data-note="f" data-key="4"></div>
      <div class="piano-key .piano-key-active" data-letter="J" data-note="g" data-key="5"></div>
      <div class="piano-key .piano-key-active" data-letter="K" data-note="a" data-key="6"></div>
      <div class="piano-key .piano-key-active" data-letter="L" data-note="b" data-key="7"></div>
      <div class="keys-sharp">
        <div class="piano-key sharp" data-letter="R" data-note="c♯"></div>
        <div class="piano-key sharp" data-letter="T" data-note="d♯"></div>
        <div class="piano-key sharp none"></div>
        <div class="piano-key sharp" data-letter="U" data-note="f♯"></div>
        <div class="piano-key sharp" data-letter="I" data-note="g♯"></div>
        <div class="piano-key sharp" data-letter="O" data-note="a♯"></div>
      </div>
    </div>
    <button class="fullscreen openfullscreen"></button>
  </main>
  <footer class="footer">
    <div class="footer-container">
      <a class="github" href="#" target="_blank" rel="noopener noreferrer">github</a>
      <a class="rss" href="https://rs.school/js/" target="_blank" rel="noopener noreferrer">
        <span class="rss-year">'21</span>
      </a>
    </div>
  </footer>

  <audio  data-key="1"  data-note="c" src="assets/audio/c.mp3"></audio>
  <audio  data-key="2" data-note="d" src="assets/audio/d.mp3"></audio>
  <audio  data-key="3" data-note="e" src="assets/audio/e.mp3"></audio>
  <audio  data-key="4" data-note="f" src="assets/audio/f.mp3"></audio>
  <audio  data-key="5" data-note="g" src="assets/audio/g.mp3"></audio>
  <audio  data-key="6" data-note="a" src="assets/audio/a.mp3"></audio>
  <audio  data-key="7" data-note="b" src="assets/audio/b.mp3"></audio>


  <script>
const COLLECTION = document.querySelectorAll('.piano-key');
const PIANO = document.getElementById('piano');

const startSound = (event) => {
    event.target.classList.add('piano-key-active');
}
const stopSound = (event) => {
    event.target.classList.remove('piano-key-active');
}


const startCorrespondOver = (event) => {
    if (event.target.classList.contains('piano-key')){
        event.target.classList.add('piano-key-active');
    }
    COLLECTION.forEach ((elem) => {
        elem. addEventListener('mouseover', startSound)
        elem. addEventListener('mouseout', stopSound)
    });
}
const stopCorrespondOver = () => {
    COLLECTION.forEach ((elem) => {
        event.target.classList.remove('piano-key-active');
        elem. removeEventListener('mouseover', startSound )
        elem. removeEventListener('mouseout', stopSound)
    });
}

PIANO.addEventListener('mousedown', startCorrespondOver, false);
PIANO.addEventListener('mouseup', stopCorrespondOver)



const audio = document.querySelector('audio');
function playAudio(src) {
  audio.src = src; 
  audio.currentTime = 0;
  audio.play();
}


window.addEventListener('mousedown', (event) => {
    if(event.target.classList.contains('piano-key')) {
      const note = event.target.dataset.note;
      /*const src = `assets/audio/${note}.mp3`;*/
      playAudio(`assets/audio/${note}.mp3`);
    }   
  }); 
 </script>
</body>
</html>